new function(){function e(){document.getElementsByTagName("body")[0].clientHeight;document.getElementById(n).style.top="0px";var e=document.getElementById(n).offsetTop,a=document.getElementById(n).offsetHeight;if(window.innerHeight)var t=window.innerHeight;else if(document.documentElement&&0!=document.documentElement.clientHeight)var t=document.documentElement.clientHeight;e+a<t&&(document.getElementById(n).style.position="relative",document.getElementById(n).style.top=t-a-e-1+"px")}function a(e){function a(){s!=t.offsetHeight&&(e(),s=t.offsetHeight)}var t=document.createElement("div"),n=document.createTextNode("S");t.appendChild(n),t.style.visibility="hidden",t.style.position="absolute",t.style.top="0",document.body.appendChild(t);var s=t.offsetHeight;setInterval(a,1e3)}function t(e,a,t){try{e.addEventListener(a,t,!1)}catch(n){e.attachEvent("on"+a,t)}}var n="footer";t(window,"load",e),t(window,"load",function(){a(e)}),t(window,"resize",e)},/*!
 * Mojik v0.2.0 https://github.com/terkel/mojik
 * @author Takeru Suzuki http://terkel.jp/
 * @license MIT http://opensource.org/licenses/MIT
 */
function(e,a){"object"==typeof module&&module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):e.Mojik=a()}(this,function(){function e(e,a,t){t=t||window;var n=!1,s=function(){n||(n=!0,requestAnimationFrame(function(){t.dispatchEvent(new CustomEvent(a)),n=!1}))};t.addEventListener(e,s)}function a(e,a){var t,n;if(a)for(t in a)n=a[t],"undefined"!=typeof n&&(e[t]=n);return e}var t=t||{},n="classList"in document.documentElement&&"requestAnimationFrame"in window,s=/Android [1-5]\./.test(navigator.userAgent),r={supportOldAndroid:!1};return t.htmlClassPrefix="mjk-",t.htmlClass={punctuationSpacer:"punctuationSpacer",leadOpeningBracket:"leadOpeningBracket",leadOpeningBracket_atLineHead:"leadOpeningBracket-atLineHead",leadOpeningBracket_atParagraphHead:"leadOpeningBracket-atParagraphHead",leadOpeningBracketBefore:"leadOpeningBracketBefore",leadOpeningBracketBefore_atLineEnd:"leadOpeningBracketBefore-atLineEnd",western:"western",western_number:"western-number",western_noSpaceBefore:"western-noSpaceBefore",western_noSpaceAfter:"western-noSpaceAfter",western_atLineHead:"western-atLineHead",western_atParagraphHead:"western-atParagraphHead",western_atParagraphEnd:"western-atParagraphEnd",western_afterLineBreak:"western-afterLineBreak"},t.characters={japaneseOpeningBrackets:"\u300c\u300e\uff08\uff5f\uff3b\u301a\uff5b\u3014\u3018\u3008\u300a\u3010\u3016\u301d",japaneseClosingBrackets:"\u300d\u300f\uff09\uff60\uff3d\u301b\uff5d\u3015\u3019\u3009\u300b\u3011\u3017\u301e\u301f",japaneseDividingPunctuations:"\uff01\uff1f",japaneseMiddleDots:"\u30fb\uff1a\uff1b\u30a0",japaneseFullStops:"\u3002\uff0e",japaneseCommas:"\u3001\uff0c",japaneseFullWidthSpace:"\u3000",western:"\\u0000-\\u007F\\u0080-\\u00FF\\u0100-\\u017F\\u0180-\\u024F\\u2000-\\u206F\\u2070-\\u209F\\u20A0-\\u20CF\\u2100-\\u214F\\u2150-\\u218F",westernOpeningBrackets:"\u2018\u201c\\(\\[\\{<\xab\u2039",westernClosingBrackets:"\u2019\u201d)]}>\xbb\u203a",westernDashes:"\\u2012\\u2013\\u2014\\u2015\\u2053",westernHyphens:"\\u002D\\u2010\\u2011",westernEllipses:"\\u2025\\u2026"},t.ignoreTag="pre|code|kbd|samp",t.compose=function(i,c){if(c=a(r,c),n&&(!s||c.supportOldAndroid)){var o=document.querySelectorAll(i),p="<!--[\\s\\S]*?-->",l="<\\/?[^>]+?\\/?>",d=new RegExp(l),u=new RegExp(p+"|"+l+"|[^<>]+","gi"),g=new RegExp("^<("+t.ignoreTag+")[ >]","i"),f=new RegExp("["+t.characters.western+"]+","g"),h=new RegExp("["+t.characters.western+"]+$"),w=new RegExp("^["+t.characters.western+"]+"),m=t.characters.japaneseOpeningBrackets+t.characters.japaneseClosingBrackets+t.characters.japaneseMiddleDots+t.characters.japaneseFullStops+t.characters.japaneseCommas+t.characters.japaneseFullWidthSpace,B=new RegExp("["+m+"]$"),k=new RegExp("^["+m+"]"),E=new RegExp("["+t.characters.japaneseOpeningBrackets+"]","g"),j=[[t.characters.japaneseClosingBrackets,t.characters.japaneseOpeningBrackets+t.characters.japaneseClosingBrackets+t.characters.japaneseDividingPunctuations+t.characters.japaneseMiddleDots+t.characters.japaneseFullStops+t.characters.japaneseCommas+t.characters.japaneseFullWidthSpace],[t.characters.japaneseDividingPunctuations,t.characters.japaneseFullWidthSpace],[t.characters.japaneseMiddleDots,t.characters.japaneseOpeningBrackets],[t.characters.japaneseFullStops+t.characters.japaneseCommas,t.characters.japaneseOpeningBrackets+t.characters.japaneseClosingBrackets+t.characters.japaneseMiddleDots+t.characters.japaneseFullWidthSpace],[t.characters.japaneseFullWidthSpace,t.characters.japaneseOpeningBrackets]],v=function(){var e={};for(key in t.htmlClass)e[key]=t.htmlClassPrefix+t.htmlClass[key];return e}();Array.prototype.forEach.call(o,function(a){function n(){var e="static"===window.getComputedStyle(a).position,t=parseFloat(window.getComputedStyle(a).paddingLeft);Array.prototype.forEach.call(r,function(e){e.classList.remove(v.western_atLineHead,v.western_afterLineBreak,v.leadOpeningBracket_atLineHead,v.fullStopAndComma_atLineEnd,v.fullStopAndComma_hangingEnd),e.classList.contains(v.leadOpeningBracket)&&e.previousSibling.classList.remove(v.leadOpeningBracketBefore_atLineEnd)}),e&&(a.style.position="relative"),Array.prototype.forEach.call(r,function(e){var a,n;e.classList.contains(v.western)?(a=parseFloat(window.getComputedStyle(e).marginLeft),s(e.previousSibling)?e.classList.add(v.western_atLineHead,v.western_afterLineBreak):e.offsetLeft-a-t<1&&e.classList.add(v.western_atLineHead)):e.classList.contains(v.leadOpeningBracket)&&(n=e.previousSibling,s(n.previousSibling)?e.classList.add(v.leadOpeningBracket_atLineHead):e.offsetLeft-t<1&&(e.classList.add(v.leadOpeningBracket_atLineHead),n.classList.add(v.leadOpeningBracketBefore_atLineEnd)))}),e&&(a.style.position="")}function s(e){return e&&"BR"===e.nodeName&&"none"!==window.getComputedStyle(e).display}var r,i,c,o,m,L,y,S=a.innerHTML.match(u),O=[];for(L=0;L<S.length;L++)if(i=S[L].match(g))for(o=new RegExp("</"+i[1]+"\\s*>"),m=new RegExp("<"+i[1]+"(?:\\s*|\\s+[^>]+)>"),c=1,y=L+1;y<S.length;y++)if(o.test(S[y])){if(c--,0===c){L=y;break}}else m.test(S[y])&&c++;else new RegExp(p+"|"+l+"|^\\s+$").test(S[L])||(O.push(S[L]),S[L]=S[L].replace(f,function(e,a){var t,n,s,r,i=a+e.length,c=/^\d([\d.,\/]*\d)?$/.test(e),o=0===a&&1===O.length,p="",l="",u=/^(\s+)(\S*)/.exec(e),g=/(\S*)(\s+)$/.exec(e);if(o){if(u){if(!u[2])return e;p=u[1],e=e.slice(p.length)}}else(/^\s/.test(e)||a>0&&B.test(S[L].slice(0,a))||0===a&&O.length>1&&(B.test(O[O.length-2])||h.test(O[O.length-2])))&&(n=!0);if(S[L].length===i)if(L===S.length-1)t=!0;else for(r=L+1;r<S.length;r++){if(!d.test(S[r])&&!/^\s+$/.test(S[r])){(k.test(S[r])||w.test(S[r]))&&(s=!0);break}r===S.length-1&&(t=!0)}if(t){if(g){if(!g[1])return e;l=g[2],e=e.slice(0,-l.length)}}else s||!/\s$/.test(e)&&!k.test(S[L].slice(i))||(s=!0);return p+'<span class="'+v.western+(c?" "+v.western_number:"")+(o?" "+v.western_atParagraphHead:"")+(t?" "+v.western_atParagraphEnd:"")+(n?" "+v.western_noSpaceBefore:"")+(s?" "+v.western_noSpaceAfter:"")+'">'+e+"</span>"+l}),S[L]=S[L].replace(E,function(e,a){var n=0===a?new RegExp("["+t.characters.japaneseOpeningBrackets+"]$").exec(O[O.length-2]):a>0?new RegExp("["+t.characters.japaneseOpeningBrackets+"]").exec(S[L].charAt(a-1)):null;return n?'<span class="'+v.punctuationSpacer+'" data-mjk-punc-pair="'+n[0]+e+'"></span>'+e:1!==O.length||0!==a&&!/^\s+$/.test(S[L].slice(0,a))?"<span class="+v.leadOpeningBracketBefore+"></span><span class="+v.leadOpeningBracket+">"+e+"</span>":'<span class="'+v.leadOpeningBracket+" "+v.leadOpeningBracket_atParagraphHead+'">'+e+"</span>"}),j.forEach(function(e){var a=new RegExp("["+e[0]+"]","g"),t=new RegExp("^(?:"+l+")*(["+e[1]+"])");S[L]=S[L].replace(a,function(e,a){var n,s=e,r="";if(a+e.length===S[L].length){for(n=L+1;n<S.length;n++)if(!d.test(S[n])){r=S[n];break}}else r=S[L].slice(a+1);return r&&t.test(r)&&(s+='<span class="'+v.punctuationSpacer+'"></span>'),s})}));a.innerHTML=S.join(""),r=a.querySelectorAll("."+v.leadOpeningBracket+":not(."+v.leadOpeningBracket_atParagraphHead+"),."+v.western+":not(."+v.western_atParagraphHead+"):not(."+v.western_noSpaceBefore+")"),n(),e("resize","optimizedResize"),window.addEventListener("optimizedResize",n)})}},t});